 {/* <Tabs handleTabChange={handleTabChange} >
              {data?.currentctg?.map((category) => (
                <Tabs.Panel key={category?.id} title={category?.name_en}>
                  <div className="pt-[50px]">
                    <p
                      className="font-[700] text-[35px] lg:text-[20px] md:text-[16px] tracking-[0.7px] text-[#212529]"
                      dangerouslySetInnerHTML={{
                        __html: category && category?.title_en,
                      }}
                    ></p>
                    <div
                      className="tab-content lg:text-[13px] "
                      dangerouslySetInnerHTML={{
                        __html: category && category?.text_en,
                      }}
                    ></div>
                  </div>
                 
                </Tabs.Panel>
              ))}
            </Tabs> */}


"use client";
import { Tabs, TabList, TabPanels, Tab, TabPanel } from "@chakra-ui/react";
import { useEffect, useState } from "react";
import Breadcrumb from "../Breadcrumb/Breadcrumb";
import Image from "next/image";

import { CopyNotification } from "../CopyNotification/CopyNotification";
import Loading from "@/app/loading";
import Transition from "../Transition/Transition";

import CurrentIsusesTab from "./CurrentIsusesTab";
import CurrentIsusesPanels from "./CurrentIsusesPanels";

const CurrentIssuesPage = ({ params }) => {
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(true);

  const [showNotification, setShowNotification] = useState(false);
  const [copiedLink, setCopiedLink] = useState("");

  useEffect(() => {
    fetch(`${process.env.NEXT_PUBLIC_API}/current-isuses/${params?.slug}`)
      .then((res) => res.json())
      .then((data) => {
        setData(data);
      })
      .finally(() => {
        setLoading(false);
      });
  }, []);

 
  

  const pageNames = [
    { name: "Home page", link: "/" },
    { name: "Current Issues", link: "#" },
  ];

  const CopyLinkTitle = () => {
    const link = window?.location?.href;
    setCopiedLink(link);
    setShowNotification(true);
    navigator?.clipboard?.writeText(link);
    setTimeout(() => {
      setShowNotification(false);
    }, 3000);
  };

  // if (loading || !data?.currentctg) return <Loading />;

  return (
    <Transition>
      <Breadcrumb pageNames={pageNames} />
      <Image
        src={data?.currentIsuses}
        width={1000}
        height={300}
        alt="cover_img"
        className="w-full h-[350px] lg:h-[250px] object-cover"
      />
      <div className="px-[150px] 2xl:px-[50px] lg:px-[20px] min-h-[65vh]">
        <div className="mt-[20px]">
          <Tabs>
            <TabList className="mb-5">
              {data?.currentctg?.map((cur) => (
                <CurrentIsusesTab data={cur} key={cur?.id} />
              ))}
            </TabList>
            <TabPanels>
              {data?.currentctg?.map((item) => (
                <CurrentIsusesPanels
                  data={item}
                  key={item?.id}
                  CopyLinkTitle={CopyLinkTitle}
                />
              ))}
            </TabPanels>
          </Tabs>
        </div>
        {showNotification && <CopyNotification link={copiedLink} />}
      </div>
    </Transition>
  );
};

export default CurrentIssuesPage;





"use client";
import { useEffect, useState } from "react";

const Tabs = ({ children, handleTabChange }) => {
  const [activeTab, setActiveTab] = useState(0);
  const [fadeOutClass, setFadeOutClass] = useState("");

  const handleChangeTab = (i) => {
    setFadeOutClass("fadeOutNoa");
    setTimeout(() => {
      setActiveTab(i);
      setFadeOutClass("");
      if (handleTabChange && children?.[i]?.props) {
        handleTabChange(children[i].props); 
        console.log('test',children[i].props?.title);
      }
    }, 300);
  };

  useEffect(() => {
    const timeoutId = setTimeout(() => {
      setFadeOutClass("");
    }, 300);

    return () => clearTimeout(timeoutId);
  }, [fadeOutClass]);

  
  

  return (
    <>
      <div className="flex items-center gap-[15px] flex-wrap">
        {children?.map((child, i) => (
          <button
            type="button"
            key={i}
            onClick={() => handleChangeTab(i)}
            className={`p-[10px] lg:p-[5px] rounded-[5px] uppercase text-[16px] lg:text-[14px] font-[600] min-w-[22%] ${
              activeTab === i
                ? "font-[700] bg-[#ec5a44] text-white shadow-[0_4px_13px_rgba(236,90,68,.6),0_2px_3px_rgba(236,90,68,.41)]"
                : "border bg-[#759acd] border-[#759acd] text-white  "
            }
            `}
          >
            {child?.props?.title}
          </button>
        ))}
      </div>
      <div className={`${fadeOutClass}`}>{children?.[activeTab]}</div>
    </>
  );
};

// Alt bileşeni tanımlayın
Tabs.Panel = function ({ children }) {
  return <>{children}</>;
};

export default Tabs;

